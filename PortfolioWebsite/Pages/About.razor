@page "/about"
@using PortfolioWebsite.Services
@using PortfolioWebsite.Models
@inject PortfolioDataService PortfolioDataService
@inject IJSRuntime JSRuntime

<PageTitle>About @_portfolioData.Name</PageTitle>

<div class="about-page">
    <!-- Mobile Header - Hidden on Desktop -->
    <div class="mobile-about-header">
        <div class="mobile-intro-content">
            <h1 class="mobile-intro-name">@_portfolioData.Name</h1>
            <h2 class="mobile-intro-title">Full Stack Developer</h2>
            <p class="mobile-intro-description">
                I build accessible, pixel-perfect digital experiences for the web.
            </p>
        </div>
        
        <!-- Mobile Horizontal Navigation -->
        <nav class="mobile-about-nav">
            <a class="mobile-nav-item @(_activeSection == "about-me" ? "active" : "")" @onclick="() => ScrollToAboutMe()" @onclick:preventDefault="true">
                ABOUT
            </a>
            <a class="mobile-nav-item @(_activeSection == "my-story" ? "active" : "")" @onclick="() => ScrollToMyStory()" @onclick:preventDefault="true">
                MY STORY
            </a>
            <a class="mobile-nav-item @(_activeSection == "random-facts" ? "active" : "")" @onclick="() => ScrollToRandomFacts()" @onclick:preventDefault="true">
                RANDOM FACTS
            </a>
            <a class="mobile-nav-item @(_activeSection == "how-i-work" ? "active" : "")" @onclick="() => ScrollToHowIWork()" @onclick:preventDefault="true">
                HOW I WORK
            </a>
        </nav>
    </div>

    <!-- Fixed Left Navigation -->
    <div class="about-sidebar">
        <div class="sidebar-content">
            <div class="intro-content">
                <h1 class="intro-name hero-animate">@_portfolioData.Name</h1>
                <h2 class="intro-title hero-animate">Full Stack Developer</h2>
                <p class="intro-description hero-animate">
                    I build accessible, pixel-perfect digital experiences for the web.
                </p>
                
                <!-- Navigation Menu -->
                <nav class="about-nav hero-animate">
                    <a class="nav-item @(_activeSection == "about-me" ? "active" : "")" @onclick="() => ScrollToAboutMe()" @onclick:preventDefault="true">
                        <span class="nav-line"></span>
                        ABOUT
                    </a>
                    <a class="nav-item @(_activeSection == "my-story" ? "active" : "")" @onclick="() => ScrollToMyStory()" @onclick:preventDefault="true">
                        <span class="nav-line"></span>
                        MY STORY
                    </a>
                    <a class="nav-item @(_activeSection == "random-facts" ? "active" : "")" @onclick="() => ScrollToRandomFacts()" @onclick:preventDefault="true">
                        <span class="nav-line"></span>
                        RANDOM FACTS
                    </a>
                    <a class="nav-item @(_activeSection == "how-i-work" ? "active" : "")" @onclick="() => ScrollToHowIWork()" @onclick:preventDefault="true">
                        <span class="nav-line"></span>
                        HOW I WORK
                    </a>
                </nav>
            </div>
        </div>
    </div>

    <!-- Right Content Area -->
    <div class="about-content-area">
        <!-- About Me Section -->
        <section class="about-section hero-animate" id="about-me">
            <div class="section-content">
                <h2 class="section-title">About Me</h2>
                <div class="content-text">
                    <p>
                        I'm a software engineer who loves building clean, scalable, and reliable applications. My experience spans across full-stack development, cloud technologies, 
                        and system design, with a strong focus on C#, .NET, Blazor, Azure, and SQL. I enjoy being hands-on with code ‚Äî whether it's designing a responsive frontend, 
                        optimizing backend performance, or streamlining deployment pipelines.
                    </p>
                    <p>
                        I've had the opportunity to work in both startup and enterprise environments, which taught me how to balance moving fast with writing maintainable, 
                        production-ready software. I take pride in debugging tricky issues, improving performance, and delivering features that make a real impact.
                    </p>
                    <p>
                        Right now, my focus is on sharpening my technical expertise and growing into more advanced senior engineer roles, while also exploring opportunities 
                        for freelance work where I can help teams ship high-quality products. At the end of the day, I enjoy solving problems, learning new tools, 
                        and building software that people can rely on.
                    </p>
                    <div class="tech-highlights">
                        <div class="tech-item">
                            <MudIcon Icon="@Icons.Material.Filled.Code" Class="tech-icon" />
                            <span>C# & .NET Core</span>
                        </div>
                        <div class="tech-item">
                            <MudIcon Icon="@Icons.Material.Filled.Cloud" Class="tech-icon" />
                            <span>Azure & DevOps</span>
                        </div>
                        <div class="tech-item">
                            <MudIcon Icon="@Icons.Material.Filled.Storage" Class="tech-icon" />
                            <span>SQL Server</span>
                        </div>
                        <div class="tech-item">
                            <MudIcon Icon="@Icons.Material.Filled.Web" Class="tech-icon" />
                            <span>Blazor WASM</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Story Section - 4 Quadrants -->
        <section class="story-section" id="my-story">
            <div class="section-content">
                <h2 class="section-title hero-animate">My Story</h2>
                <div class="story-quadrants">
                    <div class="quadrant hero-animate">
                        <div class="quadrant-content">
                            <h3>Early Beginnings</h3>
                            <p>I began with a B.S. in Applied Physics, exploring roles like laser engineering until the pandemic altered my path.</p>
                            <div class="quadrant-details">
                                <span class="detail-item">üéì B.S. Applied Physics</span>
                                <span class="detail-item">üî¨ Laser Engineering</span>
                            </div>
                        </div>
                    </div>
                    <div class="quadrant hero-animate">
                        <div class="quadrant-content">
                            <h3>The Pivot</h3>
                            <p>A recommendation from a professor led me to apply (last-minute!) to NYIT's CS master's program‚Äîwhere I landed a junior engineering role in my first semester.</p>
                            <div class="quadrant-details">
                                <span class="detail-item">üéØ M.S. Computer Science</span>
                                <span class="detail-item">‚ö° First Junior Role</span>
                            </div>
                        </div>
                    </div>
                    <div class="quadrant hero-animate">
                        <div class="quadrant-content">
                            <h3>Professional Growth</h3>
                            <p>Over 2.5 years, I progressed from junior engineer to join Schroders PLC, building full-stack, enterprise-level systems with .NET, cloud, and data-focused architecture.</p>
                            <div class="quadrant-details">
                                <span class="detail-item">üè¢ Enterprise Systems</span>
                                <span class="detail-item">‚òÅÔ∏è Cloud Architecture</span>
                            </div>
                        </div>
                    </div>
                    <div class="quadrant hero-animate">
                        <div class="quadrant-content">
                            <h3>Current Focus</h3>
                            <p>Most recently, I served as a Senior Software Engineer at Compyl, developing modular, scalable .NET frontends‚Äîan experience that sharpened my adaptability and skillset</p>
                            <div class="quadrant-details">
                                <span class="detail-item">üöÄ Senior Engineer</span>
                                <span class="detail-item">üîÑ Scalable Systems</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Random Facts Section -->
        <section class="facts-section" id="random-facts">
            <div class="section-content">
                <h2 class="section-title hero-animate">Random Facts</h2>
                <div class="facts-grid">
                    <div class="fact-card hero-animate">
                        <div class="fact-header">
                            <MudIcon Icon="@Icons.Material.Filled.Coffee" Class="fact-icon" />
                            <h3>Coffee Enthusiast</h3>
                        </div>
                        <p>I can't start my day without a good cup of coffee. It's my daily ritual and source of inspiration.</p>
                        <div class="fact-details">
                            <span class="fact-tag">‚òï Daily Ritual</span>
                            <span class="fact-tag">üí° Inspiration</span>
                        </div>
                    </div>
                    <div class="fact-card hero-animate">
                        <div class="fact-header">
                            <MudIcon Icon="@Icons.Material.Filled.MusicNote" Class="fact-icon" />
                            <h3>Music Lover</h3>
                        </div>
                        <p>I listen to all types of music while coding - it helps me focus on the task at hand and get into the flow state.</p>
                        <div class="fact-details">
                            <span class="fact-tag">üéµ Focus Music</span>
                            <span class="fact-tag">üß† Flow State</span>
                        </div>
                    </div>
                    <div class="fact-card hero-animate">
                        <div class="fact-header">
                            <MudIcon Icon="@Icons.Material.Filled.Book" Class="fact-icon" />
                            <h3>Book Collector</h3>
                        </div>
                        <p>I have a growing collection of technical books and always try to read something new each month.</p>
                        <div class="fact-details">
                            <span class="fact-tag">üìö Tech Books</span>
                            <span class="fact-tag">üìñ Monthly Goal</span>
                        </div>
                    </div>
                    <div class="fact-card hero-animate">
                        <div class="fact-header">
                            <MudIcon Icon="@Icons.Material.Filled.Pets" Class="fact-icon" />
                            <h3>Pet Person</h3>
                        </div>
                        <p>I have a cat that likes to sit on my keyboard while I'm trying to code. It's both annoying and adorable.</p>
                        <div class="fact-details">
                            <span class="fact-tag">üê± Coding Buddy</span>
                            <span class="fact-tag">‚å®Ô∏è Keyboard Cat</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- How I Work Section -->
        <section class="work-section" id="how-i-work">
            <div class="section-content">
                <h2 class="section-title hero-animate">How I Work</h2>
                <div class="work-process">
                    <div class="process-step hero-animate">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Research & Planning</h3>
                            <p>I start by understanding the requirements, researching best practices, and planning the architecture before writing any code.</p>
                            <div class="step-details">
                                <span class="step-tag">üìã Requirements Analysis</span>
                                <span class="step-tag">üèóÔ∏è Architecture Design</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step hero-animate">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Design & Prototype</h3>
                            <p>I create wireframes and prototypes to visualize the solution and get early feedback from stakeholders.</p>
                            <div class="step-details">
                                <span class="step-tag">üé® Wireframes</span>
                                <span class="step-tag">üîÑ Early Feedback</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step hero-animate">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Development & Testing</h3>
                            <p>I write clean, testable code with comprehensive testing to ensure quality and reliability.</p>
                            <div class="step-details">
                                <span class="step-tag">üß™ Comprehensive Testing</span>
                                <span class="step-tag">‚ú® Clean Code</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step hero-animate">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>Deploy & Iterate</h3>
                            <p>I deploy the solution and continuously iterate based on user feedback and performance metrics.</p>
                            <div class="step-details">
                                <span class="step-tag">üöÄ Continuous Deployment</span>
                                <span class="step-tag">üìä Performance Metrics</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

@code {
    private PortfolioData _portfolioData = new();
    private string _activeSection = "about-me";

    protected override void OnInitialized()
    {
        _portfolioData = PortfolioDataService.GetPortfolioData();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await InitializeScrollAnimations();
            await InitializeScrollSpy();
        }
    }

    private async Task InitializeScrollAnimations()
    {
        await JSRuntime.InvokeVoidAsync("initializeScrollAnimations");
    }

    private async Task InitializeScrollSpy()
    {
        await JSRuntime.InvokeVoidAsync("initializeScrollSpy", DotNetObjectReference.Create(this));
    }

    private async Task ScrollToSection(string sectionId)
    {
        Console.WriteLine($"ScrollToSection called with sectionId: {sectionId}");
        _activeSection = sectionId;
        StateHasChanged();
        await JSRuntime.InvokeVoidAsync("scrollToSection", sectionId);
        Console.WriteLine($"JavaScript scrollToSection call completed for: {sectionId}");
    }

    private async Task ScrollToAboutMe()
    {
        await ScrollToSection("about-me");
    }

    private async Task ScrollToMyStory()
    {
        await ScrollToSection("my-story");
    }

    private async Task ScrollToRandomFacts()
    {
        await ScrollToSection("random-facts");
    }

    private async Task ScrollToHowIWork()
    {
        await ScrollToSection("how-i-work");
    }

    [JSInvokable]
    public void OnSectionChange(string sectionId)
    {
        _activeSection = sectionId;
        StateHasChanged();
    }
}
