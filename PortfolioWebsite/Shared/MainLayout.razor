@using MudBlazor
@using PortfolioWebsite.Models
@using PortfolioWebsite.Services
@using Microsoft.AspNetCore.Components
@inherits LayoutComponentBase

<MudThemeProvider IsDarkMode="true" Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<!-- Animated Background -->
<AnimatedBackground @ref="AnimatedBackgroundRef" />

<!-- Global Navigation Header -->
<div class="nav-header">
    <div class="nav-background">
        <div class="glow-circle glow-circle-1"></div>
        <div class="glow-circle glow-circle-2"></div>
    </div>
    <div class="nav-container">
        <div class="nav-brand">
            <a href="">
                <span class="nav-name">@_portfolioData.Name</span>
                <span class="nav-separator">/</span>
                <span class="nav-portfolio">PORTFOLIO</span>
            </a>
        </div>
        <div class="nav-links">
            <a href="about" class="nav-link-text">ABOUT</a>
            <a href="experience" class="nav-link-text">EXPERIENCE</a>
            <a href="projects" class="nav-link-text">PROJECTS</a>
            <a href="contact" class="nav-link-text">CONTACT</a>
        </div>
    </div>
</div>

<!-- Main Content Area -->
<main class="main-content">
    @Body
</main>

@code {
    private MudTheme _theme = new();
    private PortfolioData _portfolioData = new();
    private AnimatedBackground AnimatedBackgroundRef = default!;

    [Inject] private PortfolioDataService PortfolioDataService { get; set; } = default!;
    [Inject] private NavigationManager Navigation { get; set; } = default!;

    /// <summary>
    /// Initializes the layout component by loading portfolio data and setting up the dark theme.
    /// </summary>
    protected override void OnInitialized()
    {
        _portfolioData = PortfolioDataService.GetPortfolioData();
        _theme = GetDarkTheme();
    }

    /// <summary>
    /// Gets the dark theme configuration for MudBlazor.
    /// </summary>
    /// <returns>A <see cref="MudTheme"/> object for dark mode.</returns>
    private static MudTheme GetDarkTheme()
    {
        return new MudTheme()
        {
            Palette = new PaletteDark()
            {
                Primary = "#4CAF50",
                Secondary = "#FFC107",
                AppbarBackground = "#1A1A1A",
                Background = "#1A1A1A",
                Surface = "#2D2D2D",
                DrawerBackground = "#2D2D2D",
                DrawerText = "rgba(255,255,255, 0.87)",
                Success = "#4CAF50",
                Error = "#f44336",
                Warning = "#FFC107",
                Info = "#2196f3"
            }
        };
    }
}
